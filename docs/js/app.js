(function(e){function t(t){for(var o,s,r=t[0],l=t[1],c=t[2],m=0,p=[];m<r.length;m++)s=r[m],a[s]&&p.push(a[s][0]),a[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},a={app:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue-page-note/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Page")],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.pageClick(t)}}},[n("Toolbar"),n("div",{staticClass:"screen"},e._l(e.elements,function(e){return n(e.type,{key:e.id,tag:"components",attrs:{elprop:e}})}),1),n("TransformControl")],1)},r=[],l=n("cebc"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toolbar-container"},[n("ul",{staticClass:"toolbar cf"},[n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.addTextElement("RichText")}}},[n("i",{staticClass:"material-icons"},[e._v("text_fields")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.addTextElement("RichText")}}},[n("i",{staticClass:"material-icons"},[e._v("image")])])])]),n("ul",{staticClass:"toolbar cf"},[n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("bold")}}},[n("i",{staticClass:"material-icons"},[e._v("format_bold")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("italic")}}},[n("i",{staticClass:"material-icons"},[e._v("format_italic")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("underline")}}},[n("i",{staticClass:"material-icons"},[e._v("format_underlined")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("justifyleft")}}},[n("i",{staticClass:"material-icons"},[e._v("format_align_left")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("justifycenter")}}},[n("i",{staticClass:"material-icons"},[e._v("format_align_center")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("justifyright")}}},[n("i",{staticClass:"material-icons"},[e._v("format_align_right")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("insertorderedlist")}}},[n("i",{staticClass:"material-icons"},[e._v("format_list_numbered")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("insertunorderedlist")}}},[n("i",{staticClass:"material-icons"},[e._v("format_list_bulleted")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.formatDoc("formatblock","blockquote")}}},[n("i",{staticClass:"material-icons"},[e._v("format_quote")])])])]),n("ul",{staticClass:"toolbar cf"},[n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.removeTextElement()}}},[n("i",{staticClass:"material-icons"},[e._v("close")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.savePage()}}},[n("i",{staticClass:"material-icons"},[e._v("save")])])]),n("li",[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.clearPage()}}},[n("i",{staticClass:"material-icons"},[e._v("delete_forever")])])])])])},u=[],m={methods:{addTextElement:function(e){this.$store.commit("addTextElement",e)},removeTextElement:function(){this.$store.commit("removeTextElement")},savePage:function(){this.$store.commit("savePage")},clearPage:function(){this.$store.commit("clearPage")},formatDoc:function(e,t){document.execCommand(e,!1,t)}}},p=m,d=n("2877"),f=Object(d["a"])(p,c,u,!1,null,null,null),h=f.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ctrl-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.element.selected,expression:"element.selected"}],staticClass:"control",style:e.controlStyle},[n("div",{staticClass:"rot-handle",on:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.mousedownHandle(t,"rotation")}}},[n("div",{staticClass:"handle"})]),n("div",{staticClass:"ctr-handle lh",on:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.mousedownHandle(t,"left")}}},[n("div",{staticClass:"handle"})]),n("div",{staticClass:"ctr-handle rh",on:{mousedown:function(t){t.stopPropagation(),t.preventDefault(),e.mousedownHandle(t,"right")}}},[n("div",{staticClass:"handle"})])])])},g=[],b=n("2f62"),x={computed:Object(l["a"])({},Object(b["b"])({element:function(e){return e.selectedElement}}),{controlStyle:function(){return{width:"".concat(this.element.width,"px"),height:"".concat(this.element.height,"px"),transform:"translate(".concat(this.element.x,"px, ").concat(this.element.y,"px) rotate(").concat(this.element.rot,"deg)")}}}),data:function(){return{mX:0,mY:0,eX:0,eY:0,w:0,h:0,angle:0,type:""}},methods:{mousedownHandle:function(e,t){this.mX=e.pageX,this.mY=e.pageY,this.eX=this.element.x,this.eY=this.element.y,this.w=this.element.width,this.h=this.element.height,this.angle=this.element.rot,this.type=t,document.addEventListener("mousemove",this.mousemoveHandle,!0),document.addEventListener("mouseup",this.mouseupHandle,!0)},mousemoveHandle:function(e){e.stopPropagation(),e.preventDefault();var t=e.pageX-this.mX;if("right"===this.type){var n=this.w+t;this.$store.commit("updateProperties",{width:n})}if("left"===this.type){var o=this.w-t,a=this.eX+t;this.$store.commit("updateProperties",{width:o,x:a})}if("rotation"===this.type){var i=this.eX+this.w/2,s=this.eY+this.h/2,r=e.pageX,l=e.pageY,c=Math.atan2(r-i,l-s),u=c*(180/Math.PI)*-1+180;this.$store.commit("updateProperties",{rot:u})}},mouseupHandle:function(){document.removeEventListener("mousemove",this.mousemoveHandle,!0),document.removeEventListener("mouseup",this.mouseupHandle,!0),this.mX=0,this.mY=0,this.eX=0,this.eY=0,this.w=0,this.h=0,this.type=""}}},E=x,_=Object(d["a"])(E,v,g,!1,null,null,null),P=_.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editbox",style:e.styleObj,attrs:{contenteditable:e.elprop.editable},domProps:{innerHTML:e._s(e.elprop.text)},on:{dblclick:function(t){return t.stopPropagation(),t.preventDefault(),e.onDblClick(t)},mousedown:e.mousedownHandle,input:e.updateText}})},w=[],j={props:{elprop:{type:Object,default:function(){}}},data:function(){return{mX:0,mY:0,eX:0,eY:0}},methods:{onDblClick:function(){this.$store.commit("updateProperties",{editable:!0})},mousedownHandle:function(e){this.elprop.editable||(this.mX=e.pageX,this.mY=e.pageY,this.eX=this.elprop.x,this.eY=this.elprop.y,this.$store.commit("selectElement",{id:this.elprop.id,h:this.$el.clientHeight,w:this.$el.clientWidth}),document.addEventListener("mousemove",this.mousemoveHandle,!0),document.addEventListener("mouseup",this.mouseupHandle,!0))},mousemoveHandle:function(e){this.isMove=!0,e.stopPropagation(),e.preventDefault();var t=e.pageX-this.mX,n=e.pageY-this.mY;this.$store.commit("moveElement",{x:this.eX+t,y:this.eY+n})},mouseupHandle:function(){document.removeEventListener("mousemove",this.mousemoveHandle,!0),document.removeEventListener("mouseup",this.mouseupHandle,!0)},updateText:function(e){var t=e.target.innerHTML;this.$store.commit("updateHtmlText",t)}},computed:{styleObj:function(){var e={width:this.elprop.width+"px",transform:"translate(".concat(this.elprop.x,"px, ").concat(this.elprop.y,"px) rotate(").concat(this.elprop.rot,"deg)"),zIndex:this.elprop.z,cursor:this.elprop.editable?"auto":"move"};return this.elprop.selected&&(e.outline="1px solid blue"),e}}},C=j,D=Object(d["a"])(C,y,w,!1,null,null,null),T=D.exports,k={name:"Page",components:{Toolbar:h,TransformControl:P,RichText:T},computed:Object(l["a"])({},Object(b["b"])({elements:function(e){return e.pageElements}})),methods:{pageClick:function(e){return e.target.classList.contains("page")&&(this.$el.focus(),this.$store.commit("pageSelected")),!1}}},O=k,H=Object(d["a"])(O,s,r,!1,null,null,null),$=H.exports,S={name:"app",components:{Page:$}},X=S,Y=Object(d["a"])(X,a,i,!1,null,null,null),M=Y.exports,L=n("f499"),I=n.n(L),J=(n("7514"),n("20d6"),n("5176")),z=n.n(J),N=function(e){return z()({id:e.id,type:e.type,x:Math.floor(100*Math.random()+200),y:Math.floor(100*Math.random()+200),height:100,width:300,z:0,rot:0,text:"Double click to enter text here...",tempText:"",cursor:"move",selected:!1,editable:!1})};o["a"].use(b["a"]);var R=new b["a"].Store({strict:!0,state:{counter:1,pageElements:[],selectedElement:{},htmlText:""},mutations:{initialiseStore:function(e){localStorage.getItem("pagenote")&&(e.pageElements=JSON.parse(localStorage.getItem("pagenote"))),localStorage.getItem("ecount")&&(e.counter=JSON.parse(localStorage.getItem("ecount")))},addTextElement:function(e,t){var n=N({id:e.counter,type:t});e.pageElements.push(n),e.counter+=1},removeTextElement:function(e){var t=e.selectedElement.id;e.selectedElement.selected=!1,e.selectedElement.editable=!1,e.selectedElement={},e.htmlText="",e.pageElements.splice(e.pageElements.findIndex(function(e){return e.id===t}),1)},selectElement:function(e,t){e.selectedElement.selected=!1,e.selectedElement.editable=!1,o["a"].set(e,"selectedElement",e.pageElements.find(function(e){return e.id===t.id})),e.selectedElement.height=t.h,e.selectedElement.width=t.w,e.selectedElement.selected=!0,e.htmlText=e.selectedElement.text},moveElement:function(e,t){o["a"].set(e.selectedElement,"x",t.x),o["a"].set(e.selectedElement,"y",t.y)},pageSelected:function(e){e.selectedElement.text=e.htmlText,e.selectedElement.selected=!1,e.selectedElement.editable=!1,e.selectedElement={}},updateProperties:function(e,t){for(var n in t)this.state.selectedElement.hasOwnProperty(n)&&o["a"].set(e.selectedElement,n,t[n])},savePage:function(e){localStorage.setItem("pagenote",I()(e.pageElements)),localStorage.setItem("ecount",e.counter)},updateHtmlText:function(e,t){e.htmlText=t},clearPage:function(e){localStorage.clear(),e.counter=1,e.selectedElement={},e.pageElements=[]}},actions:{}});n("a89b");o["a"].config.productionTip=!1,new o["a"]({store:R,beforeCreate:function(){this.$store.commit("initialiseStore")},render:function(e){return e(M)}}).$mount("#app")},a89b:function(e,t,n){}});
//# sourceMappingURL=app.js.map